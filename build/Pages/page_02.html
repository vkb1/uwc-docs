

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2.0 Before Installation &mdash;   documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.0 Installation Guide" href="page_03.html" />
    <link rel="prev" title="1.0 Introduction" href="page_01.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> 
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="First_pg.html">Legal Disclaimer</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_01.html">1.0  Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2.0  Before Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#uwc-for-o-g-site">2.1  UWC for O&amp;G Site</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upstream-oil-and-gas-facilities">2.2  Upstream Oil and Gas Facilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="#understanding-uwc-platform">2.3  Understanding UWC Platform</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modbus-containers">2.3.1  Modbus containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mqtt-bridge-container">2.3.2   MQTT-Bridge container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sparkplug-bridge-container">2.3.3  Sparkplug-Bridge container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kpi-application-container">2.3.4  KPI Application Container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configurations">2.3.5  Configurations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_03.html">3.0  Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_04.html">4.0  Container Configuration setting</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_05.html">5.0  Container Configuration setting</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_06.html">6.0  Site Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_07.html">7.0     UWC Modbus Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_08.html">8.0     Sparkplug-Bridge Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_09.html">9.0     Debugging steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_10.html">10.0    Error Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_11.html">11.0    Steps to flash LFM BIOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_12.html">12.0    UWC Gateway to Cloud Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_13.html">13.0    Steps to Apply RT Patch</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_14.html">14.0 Appendix</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html"></a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>2.0  Before Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Pages/page_02.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="before-installation">
<h1>2.0  Before Installation<a class="headerlink" href="#before-installation" title="Permalink to this headline">¶</a></h1>
<p>This section explains various concepts used throughout this document.</p>
<section id="uwc-for-o-g-site">
<h2>2.1  UWC for O&amp;G Site<a class="headerlink" href="#uwc-for-o-g-site" title="Permalink to this headline">¶</a></h2>
<p>The UWC is a reference design that provides a secure management platform for oil and gas upstream process monitoring and control to support oil and gas installations with various artificial lift methods such as plunger lift, gas lift, and so on.  UWC is a profile on the Intel Edge Insights (EII) base platform.
UWC provides</p>
<blockquote>
<div><ul class="simple">
<li><p>Soft-real time deterministic control (millisecond level control) in the containerized environment</p></li>
<li><p>Configurable user-defined data model describing oil well site</p></li>
<li><p>Modularized microservices-based extensible open architecture</p></li>
<li><p>Well defined message flow and payload to interact with the vendor application</p></li>
<li><p>Policy-based execution of Soft-RT applications</p></li>
<li><p>Supports multiple well pads and devices configurations</p></li>
<li><p>Polls and controls multiple devices simultaneously</p></li>
<li><p>Data Publish Subscribe ZeroMQ and MQTT</p></li>
<li><p>Device Management – System Telemetry, over-the-network (a.k.a. over-the-air, or OTA) updates of firmware (FOTA), system software (SOTA), and applications (AOTA)</p></li>
<li><p>Scalable-down to power-sensitive remote applications</p></li>
<li><p>Scalable-up to edge analytics and vision through the EII base</p></li>
</ul>
</div></blockquote>
</section>
<section id="upstream-oil-and-gas-facilities">
<h2>2.2  Upstream Oil and Gas Facilities<a class="headerlink" href="#upstream-oil-and-gas-facilities" title="Permalink to this headline">¶</a></h2>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/image1.png"><img alt="../_images/image1.png" src="../_images/image1.png" style="width: 252.0px; height: 337.8px;" /></a>
</figure>
<p>The example provided for UWC in this Guide is for a natural gas wellhead with one or more wells. The wellhead will have several field devices often using the Modbus protocols (both TCP and RTU). A Modbus device will have number of points to be read and/or written.  The table below shows how wellhead, device, and points, are related to each other.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>WellHead</p></th>
<th class="head"><p>Device</p></th>
<th class="head"><p>Point</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>WellHead1</p></td>
<td><p>flowmeter1</p></td>
<td><p>keepAlive</p></td>
</tr>
<tr class="row-odd"><td><p>WellHead1</p></td>
<td><p>flowmeter1</p></td>
<td><p>flow</p></td>
</tr>
<tr class="row-even"><td><p>WellHead1</p></td>
<td><p>iou</p></td>
<td><p>AValve</p></td>
</tr>
<tr class="row-odd"><td><p>WellHead2</p></td>
<td><p>flowmeter2</p></td>
<td><p>KeepAlive</p></td>
</tr>
<tr class="row-even"><td><p>WellHead3</p></td>
<td><p>iou</p></td>
<td><p>BValve</p></td>
</tr>
</tbody>
</table>
<p>There could be similar devices and similar points in different wellheads. Hence, UWC uses this hierarchy to uniquely name a point. A point is identified like “/device/wellhead/point” e.g. flowmeter1/WellHead1/KeepAlive
UWC defines a data model which can be used to describe the hierarchy of wellhead, device and points.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../_images/image2.png"><img alt="../_images/image2.png" src="../_images/image2.png" style="width: 564.0px; height: 499.04999999999995px;" /></a>
<figcaption>
<p><span class="caption-text">Figure 2.2.  Site configurations</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="understanding-uwc-platform">
<h2>2.3  Understanding UWC Platform<a class="headerlink" href="#understanding-uwc-platform" title="Permalink to this headline">¶</a></h2>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../_images/image3.png"><img alt="../_images/image3.png" src="../_images/image3.png" style="width: 534.5px; height: 283.0px;" /></a>
<figcaption>
<p><span class="caption-text">Figure 2.3.  High-level block diagram of UWC</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The application can subscribe to MQTT topics to receive polled data. Similarly, the application can publish data to be written on MQTT. The platform will accordingly publish or subscribe to respective topics. The MQTT topics to be used can be configured.
Internally, UWC platform uses a message bus (called ZMQ) for which the topics need to be configured. ZMQ is not shown above for ease of understanding.</p>
<section id="modbus-containers">
<h3>2.3.1  Modbus containers<a class="headerlink" href="#modbus-containers" title="Permalink to this headline">¶</a></h3>
<p>UWC supports Modbus TCP master and Modbus RTU master for communicating with Modbus slave devices present in a field. These are developed as two separate containers i.e., Modbus TCP container and Modbus RTU container. Please refer diagram in section 2.3</p>
<p><strong>1.  Modbus RTU master container</strong></p>
<p>Modbus RTU devices can be connected using RS485 or RS232. Normally, with RS232, only one device is connected at one time. Hence, to communicate with two Modbus RTU devices over RS232, two different serial ports will be needed.</p>
<p>Modbus RTU protocol with RS485 physical transport uses a twisted pair of wires in a daisy-chain shared media for all devices on a chain.  The communications parameters of all devices on a chain should be the same, so if different devices have different configuration (e.g., different parity, different baud rate, and so on), then, different Modbus RTU chains can be formed. To communicate with two different Modbus RTU networks, two different serial ports will be needed.  It is important to verify the analog signal integrity of the RS-485 chains including the use of termination resistors as per well-known RS-485 best-practices.
In UWC, one Modbus RTU master can be configured to communicate over multiple serial ports. Hence a single Modbus RTU master container handles communication with multiple Modbus RTU networks. The configuration for one Modbus RTU network (e.g., port, baud rate, and so on) can be configured in a RTU network configuration file, explained in a later section of this document.</p>
</section>
<section id="mqtt-bridge-container">
<h3>2.3.2   MQTT-Bridge container<a class="headerlink" href="#mqtt-bridge-container" title="Permalink to this headline">¶</a></h3>
<p>Modbus containers communicate over ZMQ. The MQTT-Bridge module enables communication with Modbus containers using MQTT. The MQTT- Bridge module reads data on ZMQ received from Modbus containers and publishes that data on MQTT. Similarly, the MQTT- Bridge module reads data from MQTT and publishes it on ZMQ.
This module was earlier known as MQTT-Export.</p>
</section>
<section id="sparkplug-bridge-container">
<h3>2.3.3  Sparkplug-Bridge container<a class="headerlink" href="#sparkplug-bridge-container" title="Permalink to this headline">¶</a></h3>
<p>UWC supports Eclipse Foundation’s SparkPlug standard to expose data to SCADA Master over MQTT. Sparkplug-Bridge implements the standard and enables communication with SCADA Master. This module was earlier known as SCADA-RTU.
This module exposes the data on the platform to an external, centralized, Master system for the SCADA:</p>
<blockquote>
<div><ul class="simple">
<li><p>Data from base UWC platform i.e., real devices</p></li>
<li><p>Mechanism to expose data from Apps running on UWC i.e., virtual devices</p></li>
</ul>
</div></blockquote>
<p><strong>1.  SparkPlug MQTT Topic Namespace</strong></p>
<dl class="simple">
<dt>Following is the topic format</dt><dd><p><em>spBv1.0/group_id/message_type/edge_node_id/[device_id]</em></p>
</dd>
</dl>
<p><strong>group_id:</strong></p>
<p>The group_id element of the Sparkplug™ Topic Namespace provides for a logical grouping of MQTT EoN nodes into the MQTT Server and back out to the consuming MQTT Clients. The value should be descriptive but as small as possible.</p>
<p>The value of the group_id can be valid UTF-8 alphanumeric string. The string shall not use the reserved characters of ‘+’ (plus), ‘/’ (forward slash), and ‘#’ (number sign).</p>
<p>The value of this field can be configured in a configuration file, <a class="reference internal" href="page_06.html#link"><span class="std std-ref">link</span></a></p>
<p><strong>message_type:</strong></p>
<p>The message_type elements are defined for the Sparkplug™ Topic Namespace. The values could be:</p>
<blockquote>
<div><ul class="simple">
<li><p>NBIRTH – Birth certificate for MQTT EoN nodes.</p></li>
<li><p>NDEATH – Death certificate for MQTT EoN nodes.</p></li>
<li><p>DBIRTH – Birth certificate for Devices.</p></li>
<li><p>DDEATH – Death certificate for Devices.</p></li>
<li><p>NDATA – Node data message.</p></li>
<li><p>DDATA – Device data message.</p></li>
<li><p>NCMD – Node command message.</p></li>
<li><p>DCMD – Device command message.</p></li>
<li><p>STATE – Critical application state message.</p></li>
</ul>
</div></blockquote>
<p><strong>edge_node_id:</strong></p>
<p>The edge_node_id element of the Sparkplug™ Topic Namespace uniquely identifies the MQTT EoN node within the infrastructure. The group_id combined with the edge_node_id element must be unique from any other group_id/edge_node_id assigned in the MQTT infrastructure. The topic element edge_node_id travels with every message published and should be as short as possible.</p>
<p>The value of the edge_node_id can be valid UTF-8 alphanumeric string. The string shall not use the reserved characters of ‘+’ (plus), ‘/’ (forward slash), and ‘#’ (number sign).</p>
<p>The value of this field can be configured in a configuration file, <a class="reference internal" href="page_06.html#link"><span class="std std-ref">link</span></a></p>
<p><strong>device_id:</strong></p>
<p>The device_id element of the Sparkplug™ Topic Namespace identifies a device attached (physically or logically) to the MQTT EoN node. The device_id must be unique from other devices connected to the same EoN node. The device_id element travels with every message published and should be as short as possible.</p>
<p>The format of the device_id is a valid UTF-8 alphanumeric String. The string shall not use the reserved characters of ‘+’ (plus), ‘/’ (forward slash), and ‘#’ (number sign).</p>
<p><strong>2.    Supported message types</strong></p>
<p>Following message types are supported in current version of UWC:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message Type</p></th>
<th class="head"><p>Support for real device</p></th>
<th class="head"><p>Support for virtual device (Apps)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NBIRTH</p></td>
<td><p>Supported. This is an edge level message.</p></td>
<td><p>Supported. This is an edge level message.</p></td>
</tr>
<tr class="row-odd"><td><p>NDEATH</p></td>
<td><p>Supported. This is an edge level message.</p></td>
<td><p>Supported. This is an edge level message.</p></td>
</tr>
<tr class="row-even"><td><p>DBIRTH</p></td>
<td><p>Supported.
Data is taken from YML file.</p></td>
<td><p>Supported. Vendor app should publish data on “BIRTH” topic.</p></td>
</tr>
<tr class="row-odd"><td><p>DDATA</p></td>
<td><p>Supported. Data from Poll-update messages is
taken to determine change in data
for publishing a DDATA message</p></td>
<td><p>Supported using RBE (Report By Exception).
Vendor app should publish data on “DATA” topic.</p></td>
</tr>
<tr class="row-even"><td><p>DCMD</p></td>
<td><p>Supported. A corresponding On-Demand-Write request message is
published on internal MQTT for other UWC containers to process a request</p></td>
<td><p>Supported. A corresponding CMD message is
published on internal MQTT for vendor app.</p></td>
</tr>
<tr class="row-odd"><td><p>DDEATH</p></td>
<td><p>Supported. Data from Poll-update messages is taken to determine change
in data for publishing a DDEATH message in case of error scenarios</p></td>
<td><p>Supported. Vendor app should publish data on “DEATH” topic.</p></td>
</tr>
<tr class="row-even"><td><p>NDATA</p></td>
<td><p>Not Supported</p></td>
<td><p>Not Supported</p></td>
</tr>
<tr class="row-odd"><td><p>NCMD</p></td>
<td><p>Supported “Node Control/Rebirth” control</p></td>
<td><p>Supported “Node Control/Rebirth” control</p></td>
</tr>
<tr class="row-even"><td><p>STATE</p></td>
<td><p>Not Supported</p></td>
<td><p>Not Supported</p></td>
</tr>
</tbody>
</table>
<p><strong>3.    Name of edge node</strong></p>
<p>User should properly configure “group_id” and “edge_node_id” for each edge gateway deployed in a site such that each edge node can be uniquely identified.</p>
</section>
<section id="kpi-application-container">
<h3>2.3.4  KPI Application Container<a class="headerlink" href="#kpi-application-container" title="Permalink to this headline">¶</a></h3>
<p>One sample application called as “KPI Application” is provided to depict how one can develop an application on UWC platform. This is a simple application which demonstrates how “single input, single output” control loop can be implemented.</p>
<p>A control loop is executed continuously to monitor certain parameter and the adjust other parameters. Thus, a control loop consists of one read operation and one write operation. In this sample application, polling mechanism of UWC platform is used to receive values of parameters as per polling interval. The application uses “on-demand-write” operation on receiving data from polling.</p>
<p>This KPI Application can either be executed based on MQTT communication or based on ZMQ communication. Please refer configurations for more details.</p>
<p>The KPI Application also logs all data received as a part of control loop application in a log file. This data can be used for measuring performance of the system.</p>
</section>
<section id="configurations">
<h3>2.3.5  Configurations<a class="headerlink" href="#configurations" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>UWC needs following configuration to function properly:</dt><dd><ul class="simple">
<li><p>Information about device group list (i.e., wellhead), device and points falling under respective Modbus container</p></li>
<li><p>Information about topics for internal message queue, publishers and subscribers</p></li>
</ul>
</dd>
</dl>
<p>All these configurations are related and depend on the hierarchy of wellhead, device and point.
Following sections detail the UWC installation and configuration process.</p>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="page_03.html" class="btn btn-neutral float-right" title="3.0 Installation Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="page_01.html" class="btn btn-neutral float-left" title="1.0 Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, APP.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>